var Lore={Version:"0.0.1"};"function"==typeof define&&define.amd?define("lore",Lore):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports=Lore),Lore.Mouse={Left:0,Middle:1,Right:2},Lore.Keyboard={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,Esc:27},Lore.Shaders={},Lore.DrawModes={points:0,lines:1,lineStrip:2,lineLoop:3,triangles:4,traingleStrip:5,triangleFan:6},Lore.Color=function(t,e,n,o){this.r=t||0,this.g=e||0,this.b=n||0,this.a=o||1},Lore.Color.prototype={constructor:Lore.Color,set:function(t,e,n,o){this.r=t,this.g=e,this.b=n,4==arguments.length&&(this.a=o)}},Lore.Color.fromHex=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,n,o){return e+e+n+n+o+o});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),o=parseInt(n[1],16),s=parseInt(n[2],16),i=parseInt(n[3],16);return n?new Lore.Color(o/255,s/255,i/255,1):null},Lore.Renderer=function(t,e){this.canvas=document.getElementById(t),this.clearColor=e.clearColor||new Lore.Color,this.clearDepth="clearDepth"in e?e.clearDepth:1,this.enableDepthTest="enableDepthTest"in e?e.enableDepthTest:!0,this.camera=e.camera||new Lore.OrthographicCamera(-250,250,250,-250),this.shaders=[],this.geometries=[],this.render=function(t,e){},this.init()},Lore.Renderer.prototype={constructor:Lore.Renderer,ready:!1,gl:null,init:function(){var t=this;return this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.gl?(this.gl.clearColor(this.clearColor.r,this.clearColor.g,this.clearColor.b,this.clearColor.a),this.gl.clearDepth(this.clearDepth),this.enableDepthTest&&(this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL)),this.updateViewport(0,0,this.canvas.width,this.canvas.height),window.addEventListener("resize",function(e){t.updateViewport(0,0,t.canvas.width,t.canvas.height)}),this.ready=!0,this.camera.translateZ(100),void this.animate()):void console.error("Could not initialize the WebGL context.")},updateViewport:function(t,e,n,o){this.gl.viewport(t,e,n,o)},animate:function(){var t=this;requestAnimationFrame(function(){t.animate()}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.render(this.camera,this.geometries)},createProgram:function(t){return t.init(this.gl),this.shaders.push(t),this.shaders.length-1},createGeometry:function(t,e){var n=new Lore.Geometry(t,this.gl,this.shaders[e]);return this.geometries.push(n),n}},Lore.Shader=function(t,e,n,o){this.name=t,this.uniforms=e||{},this.vertexShader=n||[],this.fragmentShader=o||[],this.gl=null,this.program=null,this.initialized=!1,this.uniforms.modelViewMatrix=new Lore.Uniform("modelViewMatrix",(new Lore.Matrix4f).entries,"float_mat4"),this.uniforms.projectionMatrix=new Lore.Uniform("projectionMatrix",(new Lore.Matrix4f).entries,"float_mat4")},Lore.Shader.prototype={constructor:Lore.Shader,getVertexShaderCode:function(){return this.vertexShader.join("\n")},getFragmentShaderCode:function(){return this.fragmentShader.join("\n")},getVertexShader:function(t){var e=t.createShader(t.VERTEX_SHADER),n="uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n\n"+this.getVertexShaderCode();return t.shaderSource(e,n),t.compileShader(e),Lore.Shader.showCompilationInfo(t,e,this.name,"Vertex Shader"),e},getFragmentShader:function(t){var e=t.createShader(t.FRAGMENT_SHADER),n="#ifdef GL_ES\nprecision highp float;\n#endif\n\n"+this.getFragmentShaderCode();return t.shaderSource(e,n),t.compileShader(e),Lore.Shader.showCompilationInfo(t,e,this.name,"Fragment Shader"),e},init:function(t){this.gl=t,this.program=this.gl.createProgram();var e=this.getVertexShader(this.gl),n=this.getFragmentShader(this.gl);return e&&n?(this.gl.attachShader(this.program,e),this.gl.attachShader(this.program,n),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)?void(this.initialized=!0):(console.error("Could not link program.\nVALIDATE_STATUS: "+this.gl.getProgramParameter(program,this.gl.VALIDATE_STATUS)+"\nERROR: "+this.gl.getError()),null)):(console.error("Failed to create the fragment or the vertex shader."),null)},updateUniforms:function(){for(var t in this.uniforms){var e=this.uniforms[t];e.stale&&Lore.Uniform.Set(this.gl,this.program,e)}}},Lore.Shader.showCompilationInfo=function(t,e,n,o){o=o||"Shader",t.getShaderParameter(e,t.COMPILE_STATUS)===!1&&console.error(o+" "+n+" did not compile."),""!==t.getShaderInfoLog(e)&&console.warn(o+" "+n+" info log: "+t.getShaderInfoLog(e))},Lore.Uniform=function(t,e,n){this.name=t,this.value=e,this.type=n,this.stale=!0},Lore.Uniform.prototype={constructor:Lore.Uniform,setValue:function(t){this.value=t,this.stale=!0}},Lore.Uniform.Set=function(t,e,n){var o=t.getUniformLocation(e,n.name);"int"===n.type?t.uniform1i(o,n.value):"int_vec2"===n.type?t.uniform2iv(o,n.value):"int_vec3"===n.type?t.uniform3iv(o,n.value):"int_vec4"===n.type?t.uniform4iv(o,n.value):"int_array"===n.type?t.uniform1iv(o,n.value):"float"===n.type?t.uniform1f(o,n.value):"float_vec2"===n.type?t.uniform2fv(o,n.value):"float_vec3"===n.type?t.uniform3fv(o,n.value):"float_vec4"===n.type?t.uniform4fv(o,n.value):"float_array"===n.type?t.uniform1fv(o,n.value):"float_mat2"===n.type?t.uniformMatrix2fv(o,!1,n.value):"float_mat3"===n.type?t.uniformMatrix3fv(o,!1,n.value):"float_mat4"===n.type&&t.uniformMatrix4fv(o,!1,n.value),n.stale=!1},Lore.Node=function(){this.type="Lore.Node",this.id=Lore.Node.createGUID(),this.isVisible=!0,this.position=new Lore.Vector3f,this.rotation=new Lore.Quaternion,this.scale=new Lore.Vector3f(1,1,1),this.up=new Lore.Vector3f(0,1,0),this.normalMatrix=new Lore.Matrix3f,this.modelMatrix=new Lore.Matrix4f,this.isStale=!1,this.children=new Array,this.parent=null},Lore.Node.prototype={constructor:Lore.Node,applyMatrix:function(t){this.modelMatrix.multiplyB(t)},getUpVector:function(){var t=this.rotation.components[0],e=this.rotation.components[1],n=this.rotation.components[2],o=this.rotation.components[3];return new Lore.Vector3f(2*(t*e-o*n),1-2*(t*t+n*n),2*(e*n+o*t))},translateOnAxis:function(t,e){var n=new Lore.Vector3f(t.components[0],t.components[1],t.components[2]);return n.applyQuaternion(this.rotation),n.multiplyScalar(e),this.position.add(n),this},translateX:function(t){this.position.components[0]=this.position.components[0]+t},translateY:function(t){this.position.components[1]=this.position.components[1]+t},translateZ:function(t){this.position.components[2]=this.position.components[2]+t},setRotation:function(t,e){this.rotation.setFromAxisAngle(t,e)},rotate:function(t,e){var n=new Lore.Quaternion(t,e);return this.rotation.multiplyA(n),this},rotateX:function(t){this.rotation.rotateX(t)},rotateY:function(t){this.rotation.rotateY(t)},rotateZ:function(t){this.rotation.rotateZ(t)},getRotationMatrix:function(){return this.rotation.toRotationMatrix()},update:function(){this.modelMatrix.compose(this.position,this.rotation,this.scale),this.isStale=!0},getModelMatrix:function(){return this.modelMatrix.entries}},Lore.Node.createGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},Lore.Geometry=function(t,e,n){Lore.Node.call(this),this.type="Lore.Geometry",this.name=t,this.gl=e,this.shader=n,this.attributes={},this.drawMode=this.gl.POINTS},Lore.Geometry.prototype=Object.assign(Object.create(Lore.Node.prototype),{constructor:Lore.Geometry,addAttribute:function(t,e,n){return this.attributes[t]=new Lore.Attribute(e,n,t),this.attributes[t].createBuffer(this.gl,this.shader.program),this},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},setMode:function(t){switch(t){case Lore.DrawModes.points:this.drawMode=this.gl.POINTS;break;case Lore.DrawModes.lines:this.drawMode=this.gl.LINES;break;case Lore.DrawModes.lineStrip:this.drawMode=this.gl.LINE_STRIP;break;case Lore.DrawModes.lineLoop:this.drawMode=this.gl.LINE_LOOP;break;case Lore.DrawModes.triangles:this.drawMode=this.gl.TRIANGLES;break;case Lore.DrawModes.triangleStrip:this.drawMode=this.gl.TRIANGLE_STRIP;break;case Lore.DrawModes.triangleFan:this.drawMode=this.gl.TRIANGLE_FAN}},size:function(){return Object.keys(this.attributes).length>0?this.attributes[Object.keys(this.attributes)[0]].size:0},draw:function(t){if(this.isVisible){for(var e in this.attributes)this.attributes[e].stale&&this.attributes[e].update(this.gl);if(this.gl.useProgram(this.shader.program),t.camera.isProjectionMatrixStale&&(this.shader.uniforms.projectionMatrix.setValue(t.camera.getProjectionMatrix()),t.camera.isProjectionMatrixStale=!1),this.isStale||t.camera.isViewMatrixStale){var n=Lore.Matrix4f.multiply(t.camera.viewMatrix,this.modelMatrix);this.shader.uniforms.modelViewMatrix.setValue(n.entries),this.isStale=!1,this.isViewMatrixStale=!1}this.shader.updateUniforms();for(e in this.attributes)this.attributes[e].bind(this.gl);this.gl.drawArrays(this.drawMode,0,this.size())}}}),Lore.Attribute=function(t,e,n){this.type="Lore.Attribute",this.data=t,this.attributeLength=e||3,this.name=n,this.size=this.data.length/this.attributeLength,this.buffer=null,this.attributeLocation,this.bufferType=null,this.drawMode=null,this.stale=!1},Lore.Attribute.prototype={constructor:Lore.Attribute,setFromVector:function(t,e){this.data.set(e.components,t*this.attributeLength,e.components.length)},setFromVectorArray:function(t){if(this.attributeLength!==t[0].components.length)throw"The attribute has a length of "+this.attributeLength+". But the vectors have "+t[0].components.length+" components.";for(var e=0;e<t.length;e++)this.data.set(t[e].components,e*this.attributeLength,t[e].components.length)},getX:function(t){return this.data[t*this.attributeLength]},setX:function(t,e){this.data[t*this.attributeLength]},getY:function(t){return this.data[t*this.attributeLength+1]},setY:function(t,e){this.data[t*this.attributeLength+1]},getZ:function(t){return this.data[t*this.attributeLength+2]},setZ:function(t,e){this.data[t*this.attributeLength+2]},getW:function(t){return this.data[t*this.attributeLength+3]},setW:function(t,e){this.data[t*this.attributeLength+3]},getGlType:function(t){return t.FLOAT},update:function(t){t.bindBuffer(this.bufferType,this.buffer),t.bufferData(this.bufferType,this.data,this.drawMode),this.stale=!1},createBuffer:function(t,e,n,o){this.buffer=t.createBuffer(),this.bufferType=n||t.ARRAY_BUFFER,this.drawMode=o||t.STATIC_DRAW,t.bindBuffer(this.bufferType,this.buffer),t.bufferData(this.bufferType,this.data,this.drawMode),this.buffer.itemSize=this.attributeLength,this.buffer.numItems=this.size,this.attributeLocation=t.getAttribLocation(e,this.name),t.bindBuffer(this.bufferType,null)},bind:function(t){t.bindBuffer(this.bufferType,this.buffer),this.attributeLocation>=0&&(t.vertexAttribPointer(this.attributeLocation,this.attributeLength,this.getGlType(t),t.FALSE,0,0),t.enableVertexAttribArray(this.attributeLocation))}},Lore.ControlsBase=function(t){this.canvas=t.canvas,this.mouse={previousPosition:{x:null,y:null},delta:{x:0,y:0},position:{x:0,y:0},state:{left:!1,middle:!1,right:!1}},this.keyboard={alt:!1,ctrl:!1,shift:!1},this.mousemove=function(t){},this.mouseup=function(t,e){},this.mousedown=function(t,e){},this.mousedrag=function(t,e){};var e=this;this.canvas.addEventListener("mousemove",function(t){null!==e.mouse.previousPosition.x&&e.mouse.state.left&&(e.mouse.delta.x=t.pageX-e.mouse.previousPosition.x,e.mouse.delta.y=t.pageY-e.mouse.previousPosition.y,e.mouse.position.x+=.01*e.mouse.delta.x,e.mouse.position.y+=.01*e.mouse.delta.y,e.mousemove(e.mouse.delta),e.mouse.state.left?e.mousedrag(e.mouse.delta,"left"):e.mouse.state.middle?e.mousedrag(e.mouse.delta,"middle"):e.mouse.state.right&&e.mousedrag(e.mouse.delta,"right")),e.mouse.previousPosition.x=t.pageX,e.mouse.previousPosition.y=t.pageY}),this.canvas.addEventListener("keydown",function(t){16==t.which?e.keyboard.shift=!0:17==t.which?e.keyboard.ctrl=!0:18==t.which&&(e.keyboard.alt=!0)}),this.canvas.addEventListener("keyup",function(t){16==t.which?e.keyboard.shift=!1:17==t.which?e.keyboard.ctrl=!1:18==t.which&&(e.keyboard.alt=!1)}),this.canvas.addEventListener("mousedown",function(t){var n=t.button,o="left";0==n?e.mouse.state.left=!0:1==n?(e.mouse.state.middle=!0,o="middle"):2==n&&(e.mouse.state.right=!0,o="right"),e.mousedown(e,o)}),this.canvas.addEventListener("mouseup",function(t){var n=t.button,o="left";0==n?e.mouse.state.left=!1:1==n?(e.mouse.state.middle=!1,o="middle"):2==n&&(e.mouse.state.right=!1,o="right"),e.mouse.previousPosition.x=null,e.mouse.previousPosition.y=null,e.mouseup(e,o)})},Lore.ControlsBase.prototype={constructor:Lore.ControlsBase},Lore.OrbitalControls=function(t,e,n){Lore.ControlsBase.call(this,t),this.radius=e,this.lookAtTarget=n;var o=t.camera;o.position=new Lore.Vector3f(0,0,e),o.lookAt(this.lookAtTarget),o.updateProjectionMatrix(),o.updateViewMatrix();var s=this;this.mousedrag=function(t,e){s.mouse.position.y<-1.57079632679&&(s.mouse.position.y=-1.57079632679),s.mouse.position.y>1.57079632679&&(s.mouse.position.y=1.57079632679),o.position.components[0]+=s.lookAtTarget.components[0]+s.radius*Math.sin(-s.mouse.position.x)*Math.cos(s.mouse.position.y),o.position.components[1]+=s.lookAtTarget.components[1]+s.radius*Math.sin(s.mouse.position.y),o.position.components[2]+=s.lookAtTarget.components[2]+s.radius*Math.cos(-s.mouse.position.x)*Math.cos(s.mouse.position.y),console.log(o.position.components[0],o.position.components[1],o.position.components[2]),console.log(o.position.length()),o.lookAt(s.lookAtTarget),o.updateProjectionMatrix(),o.updateViewMatrix()}},Lore.OrbitalControls.prototype=Object.assign(Object.create(Lore.ControlsBase.prototype),{constructor:Lore.OrbitalControls}),Lore.CameraBase=function(){Lore.Node.call(this),this.type="Lore.CameraBase",this.renderer=null,this.isProjectionMatrixStale=!1,this.isViewMatrixStale=!1,this.projectionMatrix=new Lore.ProjectionMatrix,this.viewMatrix=new Lore.Matrix4f},Lore.CameraBase.prototype=Object.assign(Object.create(Lore.Node.prototype),{constructor:Lore.CameraBase,init:function(t,e){this.gl=t,this.program=e},lookAt:function(t){var e=new Lore.Matrix4f.lookAt(this.position,t,this.getUpVector());this.rotation.setFromMatrix(e)},updateProjectionMatrix:function(){},updateViewMatrix:function(){var t=Lore.Matrix4f.compose(this.position,this.rotation,this.scale);t.invert(),this.viewMatrix=t,this.isViewMatrixStale=!0},getProjectionMatrix:function(){return this.projectionMatrix.entries},getViewMatrix:function(){return this.viewMatrix.entries}}),Lore.OrthographicCamera=function(t,e,n,o,s,i){Lore.CameraBase.call(this),this.type="Lore.OrthographicCamera",this.zoom=1,this.left=t,this.right=e,this.top=n,this.bottom=o,this.near=s||.1,this.far=i||2500,this.updateProjectionMatrix()},Lore.OrthographicCamera.prototype=Object.assign(Object.create(Lore.CameraBase.prototype),{constructor:Lore.OrthographicCamera,updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,o=(this.top+this.bottom)/2,s=n-t,i=n+t,r=o+e,c=o-e;this.projectionMatrix.setOrthographic(s,i,r,c,this.near,this.far),this.isProjectionMatrixStale=!0}}),Lore.Array2=function(t){this.arr=t},Lore.Array2.prototype={constructor:Lore.Array2,multiply:function(t,e,n){t<<=1,this.arr[t]*=e,this.arr[t+1]*=n},multiplyScalar:function(t,e){t<<=1,this.arr[t]*=e,this.arr[t+1]*=e},divide:function(t,e,n){t<<=1,this.arr[t]/=e,this.arr[t+1]/=n},divideScalar:function(t,e){t<<=1,this.arr[t]/=e,this.arr[t+1]/=e},add:function(t,e,n){t<<=1,this.arr[t]+=e,this.arr[t+1]+=n},subtract:function(t,e,n){t<<=1,this.arr[t]-=e,this.arr[t+1]-=n}},Lore.Array3=function(t){this.arr=t},Lore.Array3.prototype={constructor:Lore.Array3,multiply:function(t,e,n,o){t*=3,this.arr[t]*=e,this.arr[t+1]*=n,this.arr[t+2]*=o},multiplyScalar:function(t,e){t*=3,this.arr[t]*=e,this.arr[t+1]*=e,this.arr[t+2]*=e},divide:function(t,e,n,o){t*=3,this.arr[t]/=e,this.arr[t+1]/=n,this.arr[t+2]/=o},divideScalar:function(t,e){t*=3,this.arr[t]/=e,this.arr[t+1]/=e,this.arr[t+2]/=e},add:function(t,e,n,o){t*=3,this.arr[t]+=e,this.arr[t+1]+=n,this.arr[t+2]+=o},subtract:function(t,e,n,o){t*=3,this.arr[t]-=e,this.arr[t+1]-=n,this.arr[t+2]-=o}},Lore.Vector2f=function(t,e){this.components=new Float32Array(2),this.components[0]=t||0,this.components[1]=e||0},Lore.Vector2f.prototype={constructor:Lore.Vector2f,set:function(t,e){return this.components[0]=t,this.components[1]=e,this},getX:function(){return this.components[0]},getY:function(){return this.components[1]},setX:function(t){this.components[0]=t},setY:function(t){this.components[1]=t},lengthSq:function(){return this.components[0]*this.components[0]+this.components[1]*this.components[1]},length:function(){return Math.sqrt(this.lengthSq())},multiply:function(t){return this.components[0]*=t.components[0],this.components[1]*=t.components[1],this},multiplyScalar:function(t){return this.components[0]*=t,this.components[1]*=t,this},divide:function(t){return this.components[0]/=t.components[0],this.components[1]/=t.components[1],this},divideScalar:function(t){return this.components[0]/=t,this.components[1]/=t,this},add:function(t){return this.components[0]+=t.components[0],this.components[1]+=t.components[1],this},subtract:function(t){return this.components[0]-=t.components[0],this.components[1]-=t.components[1],this},clone:function(){return new Lore.Vector2f(this.components[0],this.components[1])},equals:function(t){return this.components[0]===t.components[0]&&this.components[1]===t.components[1]}},Lore.Vector2f.multiply=function(t,e){return new Lore.Vector2f(t.components[0]*e.components[0],t.components[1]*e.components[1])},Lore.Vector2f.multiplyScalar=function(t,e){return new Lore.Vector2f(t.components[0]*e,t.components[1]*e)},Lore.Vector2f.divide=function(t,e){return new Lore.Vector2f(t.components[0]/e.components[0],t.components[1]/e.components[1])},Lore.Vector2f.divideScalar=function(t,e){return new Lore.Vector2f(t.components[0]/e,t.components[1]/e)},Lore.Vector2f.add=function(t,e){return new Lore.Vector2f(t.components[0]+e.components[0],t.components[1]+e.components[1])},Lore.Vector2f.subtract=function(t,e){return new Lore.Vector2f(t.components[0]-e.components[0],t.components[1]-e.components[1])},Lore.Vector3f=function(t,e,n){1===arguments.length?this.components=new Float32Array(t):(this.components=new Float32Array(3),this.components[0]=t||0,this.components[1]=e||0,this.components[2]=n||0)},Lore.Vector3f.prototype={constructor:Lore.Vector3f,set:function(t,e,n){return this.components[0]=t,this.components[1]=e,this.components[2]=n,this},getX:function(){return this.components[0]},getY:function(){return this.components[1]},getZ:function(){return this.components[2]},setX:function(t){this.components[0]=t},setY:function(t){this.components[1]=t},setZ:function(t){this.components[2]=t},lengthSq:function(){return this.components[0]*this.components[0]+this.components[1]*this.components[1]+this.components[2]*this.components[2]},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},multiply:function(t){return this.components[0]*=t.components[0],this.components[1]*=t.components[1],this.components[2]*=t.components[2],this},multiplyScalar:function(t){return this.components[0]*=t,this.components[1]*=t,this.components[2]*=t,this},divide:function(t){return this.components[0]/=t.components[0],this.components[1]/=t.components[1],this.components[2]/=t.components[2],this},divideScalar:function(t){return this.components[0]/=t,this.components[1]/=t,this.components[2]/=t,this},add:function(t){return this.components[0]+=t.components[0],this.components[1]+=t.components[1],this.components[2]+=t.components[2],this},subtract:function(t){return this.components[0]-=t.components[0],this.components[1]-=t.components[1],this.components[2]-=t.components[2],this},applyQuaternion:function(t){var e=this.components[0],n=this.components[1],o=this.components[2],s=t.components[0],i=t.components[1],r=t.components[2],c=t.components[3],a=c*e+i*o-r*n,h=c*n+r*e-s*o,m=c*o+s*n-i*e,p=-s*e-i*n-r*o;return this.components[0]=a*c+p*-s+h*-r-m*-i,this.components[1]=h*c+p*-i+m*-s-a*-r,this.components[2]=m*c+p*-r+a*-i-h*-s,this},clone:function(){return new Lore.Vector3f(this.components[0],this.components[1],this.components[2])},equals:function(t){return this.components[0]===t.components[0]&&this.components[1]===t.components[1]&&this.components[2]===t.components[2]}},Lore.Vector3f.normalize=function(t){return Lore.Vector3f.divideScalar(t,t.length())},Lore.Vector3f.multiply=function(t,e){return new Lore.Vector3f(t.components[0]*e.components[0],t.components[1]*e.components[1],t.components[2]*e.components[2])},Lore.Vector3f.multiplyScalar=function(t,e){return new Lore.Vector3f(t.components[0]*e,t.components[1]*e,t.components[2]*e)},Lore.Vector3f.divide=function(t,e){return new Lore.Vector3f(t.components[0]/e.components[0],t.components[1]/e.components[1],t.components[2]/e.components[2])},Lore.Vector3f.divideScalar=function(t,e){return new Lore.Vector3f(t.components[0]/e,t.components[1]/e,t.components[2]/e)},Lore.Vector3f.add=function(t,e){return new Lore.Vector3f(t.components[0]+e.components[0],t.components[1]+e.components[1],t.components[2]+e.components[2])},Lore.Vector3f.subtract=function(t,e){return new Lore.Vector3f(t.components[0]-e.components[0],t.components[1]-e.components[1],t.components[2]-e.components[2])},Lore.Vector3f.cross=function(t,e){return new Lore.Vector3f(t.components[1]*e.components[2]-t.components[2]*e.components[1],t.components[2]*e.components[0]-t.components[0]*e.components[2],t.components[0]*e.components[1]-t.components[1]*e.components[0])},Lore.Vector3f.dot=function(t,e){return t.components[0]*e.components[0]+t.components[1]*e.components[1]+t.components[2]*e.components[2]},Lore.Matrix3f=function(t){this.entries=t||new Float32Array([1,0,0,0,1,0,0,0,1])},Lore.Matrix3f.prototype={constructor:Lore.Matrix3f,clone:function(){return new Lore.Matrix3f(new Float32Array(this.entries))},equals:function(t){for(var e=0;e<this.entries.length;e++)if(this.entries[e]!==t.entries[e])return!1;return!0}},Lore.Matrix4f=function(t){this.entries=t||new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},Lore.Matrix4f.prototype={constructor:Lore.Matrix4f,set:function(t,e,n,o,s,i,r,c,a,h,m,p,u,l,f,d){this.entries.set([t,s,a,u,e,i,h,l,n,r,m,f,o,c,p,d])},multiplyA:function(t){var e=this.entries[0],n=this.entries[4],o=this.entries[8],s=this.entries[12],i=this.entries[1],r=this.entries[5],c=this.entries[9],a=this.entries[13],h=this.entries[2],m=this.entries[6],p=this.entries[10],u=this.entries[14],l=this.entries[3],f=this.entries[7],d=this.entries[11],L=this.entries[15],g=t.entries[0],v=t.entries[4],x=t.entries[8],y=t.entries[12],w=t.entries[1],M=t.entries[5],b=t.entries[9],S=t.entries[13],A=t.entries[2],V=t.entries[6],C=t.entries[10],T=t.entries[14],P=t.entries[3],j=t.entries[7],F=t.entries[11],Q=t.entries[15];return this.entries[0]=e*g+n*w+o*A+s*P,this.entries[1]=i*g+r*w+c*A+a*P,this.entries[2]=l*g+f*w+d*A+L*P,this.entries[3]=e*v+n*M+o*V+s*j,this.entries[4]=h*g+m*w+p*A+u*P,this.entries[5]=i*v+r*M+c*V+a*j,this.entries[6]=h*v+m*M+p*V+u*j,this.entries[7]=l*v+f*M+d*V+L*j,this.entries[8]=e*x+n*b+o*C+s*F,this.entries[9]=i*x+r*b+c*C+a*F,this.entries[10]=h*x+m*b+p*C+u*F,this.entries[11]=l*x+f*b+d*C+L*F,this.entries[12]=e*y+n*S+o*T+s*Q,this.entries[13]=i*y+r*S+c*T+a*Q,this.entries[14]=h*y+m*S+p*T+u*Q,this.entries[15]=l*y+f*S+d*T+L*Q,this},multiplyB:function(t){var e=t.entries[0],n=t.entries[4],o=t.entries[8],s=t.entries[12],i=t.entries[1],r=t.entries[5],c=t.entries[9],a=t.entries[13],h=t.entries[2],m=t.entries[6],p=t.entries[10],u=t.entries[14],l=t.entries[3],f=t.entries[7],d=t.entries[11],L=t.entries[15],g=this.entries[0],v=this.entries[4],x=this.entries[8],y=this.entries[12],w=this.entries[1],M=this.entries[5],b=this.entries[9],S=this.entries[13],A=this.entries[2],V=this.entries[6],C=this.entries[10],T=this.entries[14],P=this.entries[3],j=this.entries[7],F=this.entries[11],Q=this.entries[15];return this.entries[0]=e*g+n*w+o*A+s*P,this.entries[1]=i*g+r*w+c*A+a*P,this.entries[2]=l*g+f*w+d*A+L*P,this.entries[3]=e*v+n*M+o*V+s*j,this.entries[4]=h*g+m*w+p*A+u*P,this.entries[5]=i*v+r*M+c*V+a*j,this.entries[6]=h*v+m*M+p*V+u*j,this.entries[7]=l*v+f*M+d*V+L*j,this.entries[8]=e*x+n*b+o*C+s*F,this.entries[9]=i*x+r*b+c*C+a*F,this.entries[10]=h*x+m*b+p*C+u*F,this.entries[11]=l*x+f*b+d*C+L*F,this.entries[12]=e*y+n*S+o*T+s*Q,this.entries[13]=i*y+r*S+c*T+a*Q,this.entries[14]=h*y+m*S+p*T+u*Q,this.entries[15]=l*y+f*S+d*T+L*Q,this},scale:function(t){var e=t.components[0],n=t.components[1],o=t.components[2];return this.entries[0]*=e,this.entries[4]*=n,this.entries[8]*=o,this.entries[1]*=e,this.entries[5]*=n,this.entries[9]*=o,this.entries[2]*=e,this.entries[6]*=n,this.entries[10]*=o,this.entries[3]*=e,this.entries[7]*=n,this.entries[11]*=o,this},setPosition:function(t){return this.entries[12]=t.components[0],this.entries[13]=t.components[1],this.entries[14]=t.components[2],this},setRotation:function(t){var e=t.components[0],n=t.components[1],o=t.components[2],s=t.components[3],i=e+e,r=n+n,c=o+o,a=e*i,h=e*r,m=e*c,p=n*r,u=n*c,l=o*c,f=s*i,d=s*r,L=s*c;return this.entries[0]=1-(p+l),this.entries[1]=h+L,this.entries[2]=m-d,this.entries[4]=h-L,this.entries[5]=1-(a+l),this.entries[6]=u+f,this.entries[8]=m+d,this.entries[9]=u-f,this.entries[10]=1-(a+p),this},determinant:function(){var t=a.entries[0],e=a.entries[4],n=a.entries[8],o=a.entries[12],s=a.entries[1],i=a.entries[5],r=a.entries[9],c=a.entries[13],h=a.entries[2],m=a.entries[6],p=a.entries[10],u=a.entries[14],l=a.entries[3],f=a.entries[7],d=a.entries[11],L=a.entries[15];return l*(o*r*m-n*c*m-o*i*p+e*c*p+n*i*u-e*r*u)+f*(t*r*u-t*c*p+o*s*p-n*s*u+n*c*h-o*r*h)+d*(t*c*m-t*i*u-o*s*m+e*s*u+o*i*h-e*c*h)+L*(-n*i*h-t*r*m+t*i*p+n*s*m-e*s*p+e*r*h)},decompose:function(t,e,n){var o=(new Lore.Vector3f,new Lore.Matrix4f);position.set(this.entries[12],this.entries[13],this.entries[14]);var s=Math.sqrt(this.entries[0]*this.entries[0]+this.entries[1]*this.entries[1]+this.entries[2]*this.entries[2]),i=Math.sqrt(this.entries[4]*this.entries[4]+this.entries[5]*this.entries[5]+this.entries[6]*this.entries[6]),r=Math.sqrt(this.entries[8]*this.entries[8]+this.entries[9]*this.entries[9]+this.entries[10]*this.entries[10]),c=this.determinant();0>c&&(s=-s),n.set(s,i,r);var a=1/s,h=1/i,m=1/r;return o.entries.set(this.entries),o.entries[0]*=a,o.entries[1]*=a,o.entries[2]*=a,o.entries[4]*=h,o.entries[5]*=h,o.entries[6]*=h,o.entries[8]*=m,o.entries[9]*=m,o.entries[10]*=m,e.setFromMatrix(o),this},compose:function(t,e,n){return this.setRotation(e),this.scale(n),this.setPosition(t),this},invert:function(){var t=new Lore.Matrix4f,e=this.entries;t.entries[0]=e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10],t.entries[4]=-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10],t.entries[8]=e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9],t.entries[12]=-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9],t.entries[1]=-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10],t.entries[5]=e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10],t.entries[9]=-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9],t.entries[13]=e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9],t.entries[2]=e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6],t.entries[6]=-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6],t.entries[10]=e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5],t.entries[14]=-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5],t.entries[3]=-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6],t.entries[7]=e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6],t.entries[11]=-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5],t.entries[15]=e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5];var n=e[0]*t.entries[0]+e[1]*t.entries[4]+e[2]*t.entries[8]+e[3]*t.entries[12];if(0==n)throw"Determinant is zero.";n=1/n;for(var o=0;16>o;o++)this.entries[o]=t.entries[o]*n;return this},clone:function(){return new Lore.Matrix4f(new Float32Array(this.entries))},equals:function(t){for(var e=0;e<this.entries.length;e++)if(this.entries[e]!==t.entries[e])return!1;return!0}},Lore.Matrix4f.multiply=function(t,e){var n=t.entries[0],o=t.entries[4],s=t.entries[8],i=t.entries[12],r=t.entries[1],c=t.entries[5],a=t.entries[9],h=t.entries[13],m=t.entries[2],p=t.entries[6],u=t.entries[10],l=t.entries[14],f=t.entries[3],d=t.entries[7],L=t.entries[11],g=t.entries[15],v=e.entries[0],x=e.entries[4],y=e.entries[8],w=e.entries[12],M=e.entries[1],b=e.entries[5],S=e.entries[9],A=e.entries[13],V=e.entries[2],C=e.entries[6],T=e.entries[10],P=e.entries[14],j=e.entries[3],F=e.entries[7],Q=e.entries[11],E=e.entries[15];return new Lore.Matrix4f(new Float32Array([n*v+o*M+s*V+i*j,r*v+c*M+a*V+h*j,m*v+p*M+u*V+l*j,f*v+d*M+L*V+g*j,n*x+o*b+s*C+i*F,r*x+c*b+a*C+h*F,m*x+p*b+u*C+l*F,f*x+d*b+L*C+g*F,n*y+o*S+s*T+i*Q,r*y+c*S+a*T+h*Q,m*y+p*S+u*T+l*Q,f*y+d*S+L*T+g*Q,n*w+o*A+s*P+i*E,r*w+c*A+a*P+h*E,m*w+p*A+u*P+l*E,f*w+d*A+L*P+g*E]))},Lore.Matrix4f.fromQuaternion=function(t){var e=t.components[0],n=t.components[1],o=t.components[2],s=t.components[3],i=e+e,r=n+n,c=o+o,a=e*i,h=e*r,m=e*c,p=n*r,u=n*c,l=o*c,f=s*i,d=s*r,L=s*c;return new Lore.Matrix4f(new Float32Array([1-(p+l),h+L,m-d,0,h-L,1-(a+l),u+f,0,m+d,u-f,1-(a+p),0,0,0,0,1]))},Lore.Matrix4f.lookAt=function(t,e,n){var o=Lore.Vector3f.subtract(t,e).normalize();0===o.lengthSq()&&(o.components[2]=1);var s=Lore.Vector3f.cross(n,o).normalize();0===s.lengthSq()&&(o.components[2]+=1e-4,s=Lore.Vector3f.cross(n,o).normalize());var i=Lore.Vector3f.cross(o,s);return new Lore.Matrix4f(new Float32Array([s.components[0],s.components[1],s.components[2],0,i.components[0],i.components[1],i.components[2],0,o.components[0],o.components[1],o.components[2],0,0,0,0,1]))},Lore.Matrix4f.compose=function(t,e,n){var o=new Lore.Matrix4f;return o.setRotation(e),o.scale(n),o.setPosition(t),o},Lore.Quaternion=function(t,e,n,o){1===arguments.length?this.components=new Float32Array(t):2===arguments.length?(this.components=new Float32Array(4),this.setFromAxisAngle(t,e)):(this.components=new Float32Array(4),this.components[0]=t||0,this.components[1]=e||0,this.components[2]=n||0,this.components[3]=void 0!==o?o:1)},Lore.Quaternion.prototype={constructor:Lore.Quaternion,getX:function(){return this.components[0]},getY:function(){return this.components[1]},getZ:function(){return this.components[2]},getW:function(){return this.components[3]},setX:function(t){this.components[0]=t},setY:function(t){this.components[1]=t},setZ:function(t){this.components[2]=t},setW:function(t){this.components[3]=t},setFromAxisAngle:function(t,e){var n=Lore.Vector3f.normalize(t),o=e/2,s=Math.sin(o);this.components[0]=n.components[0]*s,this.components[1]=n.components[1]*s,this.components[2]=n.components[2]*s,this.components[3]=Math.cos(o)},lengthSq:function(){return this.components[0]*this.components[0]+this.components[1]*this.components[1]+this.components[2]*this.components[2]+this.components[3]*this.components[3]},length:function(){return Math.sqrt(this.lengthSq())},inverse:function(){return this.conjugate().normalize()},normalize:function(){var t=this.length();if(0===t)this.components[0]=0,this.components[1]=0,this.components[2]=0,this.components[3]=1;else{var e=1/t;this.components[0]*=e,
this.components[1]*=e,this.components[2]*=e,this.components[3]*=e}return this},dot:function(t){return this.components[0]*t.components[0]+this.components[1]*t.components[1]+this.components[2]*t.components[2]+this.components[3]*t.components[3]},multiplyA:function(t){var e=this.components[0]*t.components[3]+this.components[3]*t.components[0]+this.components[1]*t.components[2]-this.components[2]*t.components[1],n=this.components[1]*t.components[3]+this.components[3]*t.components[1]+this.components[2]*t.components[0]-this.components[0]*t.components[2],o=this.components[2]*t.components[3]+this.components[3]*t.components[2]+this.components[0]*t.components[1]-this.components[1]*t.components[0],s=this.components[3]*t.components[3]-this.components[0]*t.components[0]-this.components[1]*t.components[1]-this.components[2]*t.components[2];return this.components[0]=e,this.components[1]=n,this.components[2]=o,this.components[3]=s,this},multiplyB:function(t){var e=t.components[0]*this.components[3]+t.components[3]*this.components[0]+t.components[1]*this.components[2]-t.components[2]*this.components[1],n=t.components[1]*this.components[3]+t.components[3]*this.components[1]+t.components[2]*this.components[0]-t.components[0]*this.components[2],o=t.components[2]*this.components[3]+t.components[3]*this.components[2]+t.components[0]*this.components[1]-t.components[1]*this.components[0],s=t.components[3]*this.components[3]-t.components[0]*this.components[0]-t.components[1]*this.components[1]-t.components[2]*this.components[2];return this.components[0]=e,this.components[1]=n,this.components[2]=o,this.components[3]=s,this},multiplyScalar:function(t){return this.components[0]*=t,this.components[1]*=t,this.components[2]*=t,this.components[3]*=t,this},conjugate:function(){return this.components[0]*=-1,this.components[1]*=-1,this.components[2]*=-1,this},add:function(t){return this.components[0]+=t.components[0],this.components[1]+=t.components[1],this.components[2]+=t.components[2],this.components[3]+=t.components[3],this},subtract:function(t){return this.components[0]-=t.components[0],this.components[1]-=t.components[1],this.components[2]-=t.components[2],this.components[3]-=t.components[3],this},rotateX:function(t){var e=t/2;return this.multiplyA(new Lore.Quaternion(Math.sin(e),0,0,Math.cos(e)))},rotateY:function(t){var e=t/2;return this.multiplyA(new Lore.Quaternion(0,Math.sin(e),0,Math.cos(e)))},rotateZ:function(t){var e=t/2;return this.multiplyA(new Lore.Quaternion(0,0,Math.sin(e),Math.cos(e)))},toAxisAngle:function(){console.warn("The method toAxisAngle() has not been implemented.")},toRotationMatrix:function(){var t=this.components[0],e=this.components[1],n=this.components[2],o=this.components[3],s=t*t,i=t*e,r=t*n,c=t*o,a=e*o,h=e*e,m=e*n,p=n*n,u=n*o,l=new Lore.Matrix4f;return l.entries[0]=1-2*(h+p),l.entries[1]=2*(i-u),l.entries[2]=2*(r+a),l.entries[4]=2*(i+u),l.entries[5]=1-2*(s+p),l.entries[6]=2*(m-c),l.entries[8]=2*(r-a),l.entries[9]=2*(m+c),l.entries[10]=1-2*(s+h),l.entries[3]=l.entries[7]=l.entries[11]=l.entries[12]=l.entries[13]=l.entries[14]=0,l.entries[15]=1,l},setFromMatrix:function(t){var e=t.entries[0],n=t.entries[4],o=t.entries[8],s=t.entries[1],i=t.entries[5],r=t.entries[9],c=t.entries[2],a=t.entries[6],h=t.entries[10],m=e+i+h,p=null;return m>0?(p=.5/Math.sqrt(m+1),this.components[0]=(a-r)*p,this.components[1]=(o-c)*p,this.components[2]=(s-n)*p,this.components[3]=.25/p):e>i&&e>h?(p=2*Math.sqrt(1+e-i-h),this.components[0]=.25*p,this.components[1]=(n+s)/p,this.components[2]=(o+c)/p,this.components[3]=(a-r)/p):i>h?(p=2*Math.sqrt(1+i-e-h),this.components[0]=(n+s)/p,this.components[1]=.25*p,this.components[2]=(r+a)/p,this.components[3]=(o-c)/p):(p=2*Math.sqrt(1+h-e-i),this.components[0]=(o+c)/p,this.components[1]=(r+a)/p,this.components[2]=.25*p,this.components[3]=(s-n)/p),this},clone:function(){return new Lore.Quaternion(this.components[0],this.components[1],this.components[2],this.components[3])},equals:function(t){return this.components[0]===t.components[0]&&this.components[1]===t.components[1]&&this.components[2]===t.components[2]&&this.components[3]===t.components[3]},toString:function(){return"x: "+this.getX()+", y: "+this.getY()+", z: "+this.getZ()+", w: "+this.getW()}},Lore.Quaternion.dot=function(t,e){return new Lore.Quaternion(t.components[0]*e.components[0]+t.components[1]*e.components[1]+t.components[2]*e.components[2]+t.components[3]*e.components[3])},Lore.Quaternion.multiply=function(t,e){return new Lore.Quaternion(t.components[0]*e.components[3]+t.components[3]*e.components[0]+t.components[1]*e.components[2]-t.components[2]*e.components[1],t.components[1]*e.components[3]+t.components[3]*e.components[1]+t.components[2]*e.components[0]-t.components[0]*e.components[2],t.components[2]*e.components[3]+t.components[3]*e.components[2]+t.components[0]*e.components[1]-t.components[1]*e.components[0],t.components[3]*e.components[3]+t.components[0]*e.components[0]+t.components[1]*e.components[1]-t.components[2]*e.components[2])},Lore.Quaternion.multiplyScalar=function(t,e){return new Lore.Quaternion(t.components[0]*e,t.components[1]*e,t.components[2]*e,t.components[3]*e)},Lore.Quaternion.inverse=function(t){var e=new Lore.Quaternion(t.components);return e.conjugate().normalize()},Lore.Quaternion.normalize=function(t){var e=t.length();if(0===e)return new Lore.Quaternion(0,0,0,1);var n=1/e;return new Lore.Quaternion(t.components[0]*n,t.components[1]*n,t.components[2]*n,t.components[3]*n)},Lore.Quaternion.conjugate=function(t){return new Lore.Quaternion(-1*t.components[0],-1*t.components[1],-1*t.components[2],t.components[3])},Lore.Quaternion.add=function(t,e){return new Lore.Quaternion(t.components[0]+e.components[0],t.components[1]+e.components[1],t.components[2]+e.components[2],t.components[3]+e.components[3])},Lore.Quaternion.subtract=function(t,e){return new Lore.Quaternion(t.components[0]-e.components[0],t.components[1]-e.components[1],t.components[2]-e.components[2],t.components[3]-e.components[3])},Lore.Quaternion.fromMatrix=function(t){var e=new Lore.Quaternion;return e.setFromMatrix(t),e},Lore.Quaternion.slerp=function(t,e,n){if(0===n)return new Lore.Quaternion(t.components);if(1===n)return new Lore.Quaternion(e.components);var o=new Lore.Quaternion(e.components),s=t.components[0]*o.components[0]+t.components[1]*o.components[1]+t.components[2]*o.components[2]+t.components[3]*o.components[3];if(0>s&&(o.multiplyScalar(-1),s=-s),Math.abs(s)>=1)return new Lore.Quaternion(t.components);var i=Math.acos(s),r=sqrt(1-s*s);if(Math.abs(r)<.001)return new Lore.Quaternion(.5*t.components[0]+.5*o.components[0],.5*t.components[1]+.5*o.components[1],.5*t.components[2]+.5*o.components[2],.5*t.components[3]+.5*o.components[3]);var c=Math.sin((1-n)*i)/r,a=Math.sin(n*i)/r;return new Lore.Quaternion(t.components[0]*c+o.components[0]*a,t.components[1]*c+o.components[1]*a,t.components[2]*c+o.components[2]*a,t.components[3]*c+o.components[3]*a)},Lore.ProjectionMatrix=function(){Lore.Matrix4f.call(this)},Lore.ProjectionMatrix.prototype=Object.assign(Object.create(Lore.Matrix4f.prototype),{constructor:Lore.ProjectionMatrix,setOrthographic:function(t,e,n,o,s,i){var r=1/(e-t),c=1/(n-o),a=1/(i-s),h=(e+t)*r,m=(n+o)*c,p=(i+s)*a;return this.set(),this.entries[0]=2*r,this.entries[4]=0,this.entries[8]=0,this.entries[12]=-h,this.entries[1]=0,this.entries[5]=2*c,this.entries[9]=0,this.entries[13]=-m,this.entries[2]=0,this.entries[6]=0,this.entries[10]=-2*a,this.entries[14]=-p,this.entries[3]=0,this.entries[7]=0,this.entries[11]=0,this.entries[15]=1,this}}),Lore.Cloud=function(){Lore.Node.call(this),this.type="Lore.Cloud"},Lore.Cloud.prototype=Object.assign(Object.create(Lore.Node.prototype),{constructor:Lore.Cloud}),Lore.Shaders["default"]=new Lore.Shader("Default",{},["attribute vec3 position;","attribute vec3 color;","varying vec3 vColor;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","gl_PointSize = 5.0;","vColor = color;","}"],["varying vec3 vColor;","void main() {","gl_FragColor = vec4(vColor, 1.0);","}"]);